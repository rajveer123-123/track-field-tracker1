<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Athlete Performance Pro-Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2563eb;
            --success: #10b981;
            --danger: #ef4444;
            --bg: #f8fafc;
            --card: #ffffff;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            color: #1e293b;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        .input-card {
            background: var(--card);
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .grid-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 14px;
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: 0.3s;
        }

        button:hover { opacity: 0.9; }

        .player-section {
            background: var(--card);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .analysis-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
        }

        .trend-up { background: #dcfce7; color: #166534; }
        .trend-down { background: #fee2e2; color: #991b1b; }

        canvas {
            max-height: 350px;
            margin-top: 20px;
        }

        @media (max-width: 600px) {
            body { padding: 10px; }
            .input-card { padding: 15px; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>üèÉ‚Äç‚ôÇÔ∏è Sports Performance Tracker</h1>
        <p>Analyze athlete progress with professional precision</p>
    </header>

    <div class="input-card">
        <div class="grid-inputs">
            <input type="text" id="playerName" placeholder="Player Name (e.g. Rajveer)">
            <select id="sportName">
                <option value="Long Jump">Long Jump (Meters)</option>
                <option value="100m Sprint">100m Sprint (Seconds)</option>
                <option value="High Jump">High Jump (Meters)</option>
            </select>
            <input type="date" id="date">
            <input type="number" id="score" placeholder="Score/Result" step="0.01">
        </div>
        <button onclick="addData()">Update Dashboard</button>
    </div>

    <div id="dashboard"></div>
</div>

<script>
    let athleteData = JSON.parse(localStorage.getItem('athleteData')) || {};

    function addData() {
        const name = document.getElementById('playerName').value.trim();
        const sport = document.getElementById('sportName').value;
        const date = document.getElementById('date').value;
        const score = parseFloat(document.getElementById('score').value);

        if(!name || !date || isNaN(score)) {
            alert("Please fill all details correctly!");
            return;
        }

        if(!athleteData[name]) athleteData[name] = {};
        if(!athleteData[name][sport]) athleteData[name][sport] = [];

        athleteData[name][sport].push({date, score});
        // Sort by date
        athleteData[name][sport].sort((a,b) => new Date(a.date) - new Date(b.date));
        
        localStorage.setItem('athleteData', JSON.stringify(athleteData));
        renderDashboard();
    }

    function renderDashboard() {
        const dashboard = document.getElementById('dashboard');
        dashboard.innerHTML = '';

        for(let player in athleteData) {
            const playerDiv = document.createElement('div');
            playerDiv.className = 'player-section';
            playerDiv.innerHTML = `<h2>üë§ Player: ${player}</h2>`;

            for(let sport in athleteData[player]) {
                const sportId = `${player}-${sport}`.replace(/\s+/g, '-');
                const dataPoints = athleteData[player][sport];
                const lastScore = dataPoints[dataPoints.length - 1].score;
                const firstScore = dataPoints[0].score;
                
                // Logic to check if increasing or decreasing
                let trendClass = 'trend-up';
                let trendText = 'Improving';

                if(sport.includes('Sprint')) {
                    // In Sprint, lower time is better
                    if(lastScore > firstScore) { trendClass = 'trend-down'; trendText = 'Declining (Time Increased)'; }
                } else {
                    if(lastScore < firstScore) { trendClass = 'trend-down'; trendText = 'Declining (Score Dropped)'; }
                }

                playerDiv.innerHTML += `
                    <div style="margin-top:20px;">
                        <h4 style="margin-bottom:5px;">üéØ ${sport}</h4>
                        <span class="analysis-badge ${trendClass}">${trendText}</span>
                        <canvas id="${sportId}"></canvas>
                    </div>
                `;

                // Render Chart after adding to DOM
                setTimeout(() => {
                    const ctx = document.getElementById(sportId).getContext('2d');
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: dataPoints.map(d => d.date),
                            datasets: [{
                                label: `${sport} Performance`,
                                data: dataPoints.map(d => d.score),
                                borderColor: '#2563eb',
                                backgroundColor: 'rgba(37, 99, 235, 0.1)',
                                fill: true,
                                tension: 0.3,
                                borderWidth: 3,
                                pointRadius: 5
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: { legend: { display: false } },
                            scales: {
                                y: { beginAtZero: false, grid: { color: '#f1f5f9' } },
                                x: { grid: { display: false } }
                            }
                        }
                    });
                }, 0);
            }
            dashboard.appendChild(playerDiv);
        }
    }

    // Load existing data on start
    renderDashboard();
</script>

</body>
</html>
